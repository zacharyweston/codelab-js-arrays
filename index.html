<!doctype html>
<html>
  <head>
    <title>Do This Stuff</title>
  </head>
  <body>
    <header>
       <h1>Don't Not Do List</h1>
    </header>
    <main>
      <input id="newTodoInput" type="text">
      <ul id="todoList"></ul>
      <p id="counter">0</p>
      <button type="button" id="randomizer">Can't Decide!</button>
      <br>
      <button type="button" id="clearAll">Clear All</button>
    </main>
      <script>
        // ------------
        // GLOBAL STATE
        // ------------

        var todos = [];

        // --------
        // ELEMENTS
        // --------

        var newTodoInput = document.getElementById('newTodoInput');
        var todoList = document.getElementById('todoList');
        var counter = document.getElementById("counter");
        var randomizerButton = document.getElementById('randomizer');
        var clearAllButton = document.getElementById('clearAll');

        // ---------
        // RENDERERS
        // ---------

        // Renders list of todos items
        function renderTodos() {
          todoList.innerHTML = todos.map(function(todo, index) {
            return '<li class="item">' +
              todo +
              ' <button class="removeTodo" data-index="' + index + '">X</button>' +
            '</li>';
          }).join('');
        }

        // Renders the current number of todos
        function renderTodosCount() {
          var count = todos.length;
          counter.innerHTML = count;
        }

        // Renders the entire todo list
        function renderAll() {
          renderTodos();
          renderTodosCount();
        }

        // ------
        // EVENTS
        // ------

        // Displays a random todo item
        randomizerButton.onclick = function() {
          var randomNumber = Math.floor(Math.random() * todos.length);
          var randomItem = todos[randomNumber];
          alert(randomItem);
        };

        // Clears all todo items
        clearAllButton.onclick = function() {
          todos = [];
          renderAll();
        };

        // Adds a new todo item
        newTodoInput.onkeypress = function(event) {
          if (event.which === 13) {
            todos.push(this.value);
            this.value = '';
            renderAll();
          }
        };

        // Deletes a todo item
        todoList.onclick = function(event) {
          var clickedElement = event.target;
          if (clickedElement.className === 'removeTodo') {
            todos.splice(clickedElement.dataset.index, 1);
            renderAll();
          }
        };
      </script>
    </body>
</html>
