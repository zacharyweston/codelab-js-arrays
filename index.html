<!doctype html>
<html>
  <head>
    <title>Do This Stuff</title>
  </head>
  <body>
    <header>
       <h1>Don't Not Do List</h1>
    </header>
    <main>
      <input id="newTodoInput" type="text">
      <ul id="todoList"></ul>
      <p id="counter">0</p>
      <button type="button" id="randomizer">Can't Decide!</button>
      <br>
      <button type="button" id="clearAll">Clear All</button>
    </main>
      <script>
        var todos = [];

        var newTodoInput = document.getElementById('newTodoInput');
        var todoList = document.getElementById('todoList');

        function renderTodosCount() {
          todoList.innerHTML = todos.map(function(todo, index) {
            return '<li class="item">' +
              todo +
              ' <button class="removeTodo" data-index="' + index + '">X</button>' +
            '</li>';
          }).join('');
        }

        newTodoInput.onkeypress = function(event) {
          if (event.which === 13) {
            todos.push(this.value);
            this.value = '';
            renderAll();
          }
        };

        todoList.onclick = function(event) {
          var clickedElement = event.target;
          if (clickedElement.className === 'removeTodo') {
            todos.splice(clickedElement.dataset.index, 1);
            renderAll();
          }
        };

        function renderTodos() {
          var count = todos.length;
          document.getElementById("counter").innerHTML = count;
        }

        document.getElementById('randomizer').onclick = function() {
          var randomNumber = Math.floor(Math.random() * todos.length);
          var randomItem = todos[randomNumber];
          alert(randomItem);
        };

        document.getElementById('clearAll').onclick = function() {
          todos = [];
          renderAll();
        };
        function renderAll() {
          renderTodos();
          renderTodosCount();
        };
      </script>
    </body>
</html>
